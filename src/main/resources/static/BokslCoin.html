<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>복슬코인</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
        integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.2/css/jquery.dataTables.css">

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"
          integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js"
          integrity="sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF"
          crossorigin="anonymous"></script>
  <script type="text/javascript" charset="utf8"
          src="https://cdn.datatables.net/1.11.2/js/jquery.dataTables.js"></script>
</head>
<body>
<div class="container-fluid">
  <h1>복슬코인</h1>
  <div class="row">
    <div class="col-sm">
      <ul class="nav nav-pills nav-fill">
        <li class="nav-item">
          <a class="nav-link active" href="#">거래내역</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">거래주기별,코인별 자산내역</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">거래주기별 자산 합계</a>
        </li>
      </ul>
    </div>
  </div>
  <div class="row" style="margin: 10px;">
  </div>
  <div class="row">
    <div class="col-sm">

      <table id="dtBasicExample" class="table table-striped table-bordered table-sm" cellspacing="0" width="100%">
        <thead>
        <tr>
          <th class="th-sm">No.</th>
          <th class="th-sm">매매</th>
          <th class="th-sm">코인</th>
          <th class="th-sm">거래 금액</th>
          <th class="th-sm">거래 단가</th>
          <th class="th-sm">거래 시간</th>
        </tr>
        </thead>
        <tbody>
        <!--  <tr>-->
        <!--    <td>100</td>-->
        <!--    <td>매수</td>-->
        <!--    <td>KRW-BTC</td>-->
        <!--    <td>10,000,000</td>-->
        <!--    <td>43,000,000</td>-->
        <!--    <td>2021-06-08 11:20:20</td>-->
        <!--  </tr>-->
        </tbody>
      </table>
    </div>
  </div>
</div>
<script>
  const data = [
    {
      "no": 100,
      "market": "매수",
      "tradeType": "KRW-BTC",
      "amount": 10000000.0546,
      "unitPrice": 43000000.577899,
      "regDate": "2021-06-08 11:20:20",
    },
  ]

  $(document).ready(function () {
    $('#dtBasicExample').DataTable({
      ordering: false,
      stateSave: true,
      language: {
        decimal: ",",
      },
      "processing": true,
      "serverSide": true,
      "ajax": {
        "url": "/trade/page",
        "data": function (d) {
          console.log(d);
          const page = parseInt(d.start / d.length);
          return {
            "size": d.length,
            "page": page,
            "market": d.search.value
          };
        },
        "dataSrc": function (result) {
          console.log("aaa", result);
          result.result.content.forEach((a, idx) => {
            a["no"] = result.result.pageable.offset + (result.result.content.length - idx);
          });
          return result.result.content;
        }
      },
      data: data,
      columns: [
        {data: 'no'},
        {data: 'market'},
        {data: 'tradeType'},
        {data: 'amount', className: "text-right"},
        {data: 'unitPrice', className: "text-right"},
        {data: 'regDate'}
      ],
      columnDefs: [
        {
          targets: [3, 4],
          render: $.fn.dataTable.render.number(',', '.', 0, '', '원')
        }
      ]

    });
    $('.dataTables_length').addClass('bs-select');
  });
</script>
</body>
</html>
